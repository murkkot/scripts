services:
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    user: "1000"
    restart: unless-stopped
    environment:
      DOMAIN: ${VAULTWARDEN_DOMAIN}
    volumes:
      - ./data/:/data/
    ports:
      - 8001:80

  vaultwarden-backup:
    image: bruceforce/vaultwarden-backup
    restart: on-failure
    init: true
    depends_on:
      - vaultwarden
    volumes:
      - vaultwarden:/data/
      # uncomment this if you want your backup to be written to ./backup/ folder"
      - /mnt/backup/vaultwarden/:/backup/
    env_file:
      - .env

volumes:
  vaultwarden: